swagger: '2.0'
info:
  title: ACME Company API
  description: ACME Company API to manage stores, orders, and payments
  version: '2.5'
consumes:
  - application/json
produces:
  - application/json
  
paths:
  /stores:
    get:
      operationId: app.list
      parameters:
        - in: query
          name: storeAddress
          type: string
        - default: 100
          format: int32
          in: query
          name: limit
          type: integer
      responses:
        '200':
          description: Return stores
          schema:
            properties:
              stores:
                items:
                  $ref: '#/definitions/ResumeStore'
                type: array
            type: object
      summary: List Stores
      tags:
        - 1. Store API - List and Create
    post:
      operationId: app.create
      parameters:
        - in: body
          name: store
          required: true
          schema:
            $ref: '#/definitions/Store'
      responses:
        '201':
          description: Store created
        '400':
          description: Store already exist
      summary: Create a Store
      tags:
        - 1. Store API - List and Create
      x-codegen-request-body-name: store
  '/stores/{storeId}':
    get:
      operationId: app.detail
      parameters:
        - format: int32
          in: path
          name: storeId
          required: true
          type: integer
      responses:
        '200':
          description: Return store
          schema:
            $ref: '#/definitions/Store'
        '404':
          description: Store does not exist
      summary: Detail of a Store
      tags:
        - '2. Store API - Detail, Update and Remove'
    put:
      operationId: app.update
      parameters:
        - format: int32
          in: path
          name: storeId
          required: true
          type: integer
        - in: body
          name: store
          required: false
          schema:
            $ref: '#/definitions/Store'
      responses:
        '200':
          description: Store updated
        '404':
          description: Store does not exist
      summary: Update a Store
      tags:
        - '2. Store API - Detail, Update and Remove'
      x-codegen-request-body-name: store
    delete:
      operationId: app.remove
      parameters:
        - format: int32
          in: path
          name: storeId
          required: true
          type: integer
      responses:
        '204':
          description: Store was deleted
        '404':
          description: Store does not exist
      summary: Remove a Store
      tags:
        - '2. Store API - Detail, Update and Remove'
  /orders :
    get:
      operationId: app.order
      parameters:
        - format: int32
          in: query
          name: orderId
          required: true
          type: integer
      responses:
        '200':
          description: Retrieve order by ID
          schema:
            $ref: '#/definitions/Order'
        '404':
          description: Order does not exist
      summary: Detail of an Order
      tags:
        - '3. Order API - Detail, Update and Remove'
    post:
      operationId: app.createOrder
      parameters:
        - in: body
          name: order
          required: false
          schema:
            $ref: '#/definitions/Order'
      responses:
        '200':
          description: Order updated
        '404':
          description: Order already exist
      summary: Create an Order
      tags:
        - '3. Order API - Detail, Update and Remove'
      x-codegen-request-body-name: store
    delete:
      operationId: app.refund
      parameters:
        - format: int32
          in: query
          name: orderId
          required: true
          type: integer
      responses:
        '200':
          description: Refunded with sucess
        '404':
          description: 'Refund was not able to be performed, check if ID exist or if the refund period of 10 days passed'
      summary: Refund an order
      tags:
        - '3. Order API - Detail, Update and Remove'
      x-codegen-request-body-name: store

definitions:
  ResumeStore:
    properties:
      id:
        description: store identifier
        format: int32
        type: integer
      name:
        description: Name of the store
        example: Apple Park Visitor Center
        maxLength: 100
        minLength: 1
        type: string
    type: object
  Store:
    properties:
      address:
        description: Coordinates of the store
        example: '37.3327째 N, 122.0053째 W'
        minLength: 1
        type: string
      created:
        description: Creation time
        example: '2017-11-17T13:49:51.230Z'
        format: date-time
        type: string
      id:
        description: store identifier
        format: int32
        type: integer
        readOnly: true
      name:
        description: Name of the store
        example: Apple Park Visitor Center
        maxLength: 100
        minLength: 1
        type: string
      tags:
        description: Custom tags
        items:
          type: string
        type: array
    required:
      - name
    type: object
  Order:
    properties:
      address:
        description: Address of the order
        example: '37.3327째 N, 122.0053째 W'
        minLength: 1
        type: string
      confirmationDate:
        description: Confirmation date of the order
        example: '2017-11-17 13:49:51.230860' #maybe use the confirmation date as the date order was created
#        format: date-time
        type: string
      id:
        description: store identifier
        format: int32
        type: integer
        readOnly: true
      status:
        description: OrderStatus
        example: paid
        maxLength: 100
        minLength: 1
        type: string
    # required:
    #   - address
    type: object
  # ResumeOrder:
  #   properties:
  #     id:
  #       description: store identifier
  #       format: int32
  #       type: integer
  #       readOnly: true
  #     status:
  #       description: OrderStatus
  #       example: paid
  #       maxLength: 100
  #       minLength: 1
  #       type: string
  #   # required:
  #   #   - name
  #   type: object
    
x-components:
  parameters:
    storeId:
      in: path
      name: storeId
      required: true
      schema:
        format: int32
        type: integer
  requestBodies:
    storeBody:
      content:
        application/json:
          schema:
            $ref: '#/definitions/Store'
      required: false
